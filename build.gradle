/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'eclipse'
}

def okexName = 'okex-adapter'
def okexVersion = 'alpha-0.1.4.11'
def okcoinName = 'okcoin-adapter'
def okcoinVersion = 'alpha-1.0.0.7'

repositories {
    mavenCentral()
    maven {
        url "http://maven.bookmap.com/maven2/releases/"
    }
}

eclipse {
    classpath {
       downloadSources=true
    }
}

dependencies {
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.2.1'
    implementation group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: '2.2.1'
    implementation group: 'org.glassfish.tyrus', name: 'tyrus-client', version: '1.15'
//this one is temp until api core lib is available with the Layer1ApiPublicInterface 
    compileOnly fileTree(dir: 'lib', include: '*.jar')
    
    implementation 'org.glassfish.tyrus:tyrus-container-grizzly-client:1.15'
    implementation 'javax.ws.rs:javax.ws.rs-api:2.1.1'
    implementation 'org.java-websocket:Java-WebSocket:1.3.9'
    implementation 'org.apache.commons:commons-lang3:3.8.1'
    implementation 'org.glassfish.jersey.core:jersey-client:2.27'
    implementation 'org.glassfish.jersey.inject:jersey-hk2:2.28'
    implementation 'commons-codec:commons-codec:1.12'
    compileOnly 'com.google.code.gson:gson:2.4'
    implementation 'org.apache.commons:commons-compress:1.16'
    compileOnly 'org.projectlombok:lombok:1.18.4'
    annotationProcessor 'org.projectlombok:lombok:1.18.4'
}

group = 'com.stableapps'
sourceCompatibility = '1.8'

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}


task okex (type: Jar){
    baseName = okexName
    version = okexVersion
    
    from {
        configurations.runtimeClasspath.collect { 
            exclude '/**/DEPENDENCIES.txt'
            exclude '/**/LICENSE*'
            exclude '/**/NOTICE*'
            exclude '/**/INDEX*'
            exclude '/com/stableapps/okcoin/**'
            
            it.isDirectory() ? it : zipTree(it)

            }
    }
    with jar
}

task okcoin (type: Jar){
    baseName = okcoinName
    version = okcoinVersion

    from {
        configurations.runtimeClasspath.collect { 
            exclude '/**/DEPENDENCIES.txt'
            exclude '/**/LICENSE*'
            exclude '/**/NOTICE*'
            exclude '/**/INDEX*'
            exclude '/com/stableapps/okex/**'
            
            it.isDirectory() ? it : zipTree(it)
            }
    }
    with jar
}
